<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Events - Phase 3 - Decorate</name>
    <events>
        <include>Events - Common</include>
        <event-group description="" sid="2988744877479891" title="LAYOUT ROOT">
            <sub-events>
                <variable constant="0" name="TickCountAtStartOfLayout" sid="6319678039979318" static="1" type="number">0</variable>
                <variable constant="0" name="StartX" sid="3880459603791739" static="1" type="number">350</variable>
                <variable constant="0" name="StartY" sid="9516740109418225" static="1" type="number">160</variable>
                <variable constant="0" name="FlowersCount" sid="7299355969258432" static="1" type="number">9</variable>
                <variable constant="0" name="OverlapPercent" sid="2236137402117079" static="1" type="number">0.15</variable>
                <variable constant="0" name="MinScale" sid="7179635873072381" static="1" type="number">0.5</variable>
                <variable constant="0" name="MaxScale" sid="9818304363819659" static="1" type="number">0.7</variable>
                <variable constant="0" name="PrevFlowerId" sid="9594445174543815" static="1" type="number">0</variable>
                <variable constant="0" name="OffsetX" sid="2970032935541051" static="1" type="number">0</variable>
                <event-block sid="3279056471687852">
                    <conditions />
                    <actions>
                        <action id="-9" name="Set value" sid="5043608733313885" type="System">
                            <param id="0" name="Variable">debug_line2</param>
                            <param id="1" name="Value">&quot;viewport (L:R, T:B): &quot; &amp; floor(ViewportLeft(0)) &amp; &quot;:&quot;  &amp; floor(ViewportRight(0)) &amp; &quot;, &quot; &amp; floor(ViewportTop(0)) &amp; &quot;:&quot;&amp; floor(ViewportBottom(0))</param>
                        </action>
                        <action id="-9" name="Set value" sid="7439481296731195" type="System">
                            <param id="0" name="Variable">debug_line3</param>
                            <param id="1" name="Value">&quot;window (w:h): &quot; &amp; floor(WindowWidth) &amp; &quot;:&quot;  &amp; floor(WindowHeight)</param>
                        </action>
                    </actions>
                </event-block>
                <event-group collapsed="1" description="" sid="3469279951967914" title="setup the layout">
                    <sub-events>
                        <event-block sid="9809400649618648">
                            <conditions>
                                <condition id="-2" name="On start of layout" sid="9736519629033493" type="System" />
                            </conditions>
                            <actions>
                                <action id="-22" name="Set layout angle" sid="3344406607112043" type="System">
                                    <param id="0" name="Angle">90</param>
                                </action>
                                <action id="-9" name="Set value" sid="86361725888015" type="System">
                                    <param id="0" name="Variable">TickCountAtStartOfLayout</param>
                                    <param id="1" name="Value">tickcount</param>
                                </action>
                                <action id="-3" name="Set position" sid="3315353643049802" type="Fader">
                                    <param id="0" name="X">-1000</param>
                                    <param id="1" name="Y">-1000</param>
                                </action>
                                <action id="-7" name="Set size" sid="9304454489538159" type="Fader">
                                    <param id="0" name="Width">3000</param>
                                    <param id="1" name="Height">3000</param>
                                </action>
                                <action id="-16" name="Set opacity" sid="7021647584817029" type="Fader">
                                    <param id="0" name="Opacity">100</param>
                                </action>
                                <action id="-26" name="Move to layer" sid="8186146733219269" type="Fader">
                                    <param id="0" name="Layer">100</param>
                                </action>
                                <action id="-24" name="Move to top" sid="4183019660494142" type="Fader" />
                            </actions>
                        </event-block>
                        <event-block sid="5766139971758115">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="7039292422864937" type="System">
                                    <param id="0" name="First value">tickcount</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">TickCountAtStartOfLayout+1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Set position" sid="7315557834670735" type="Bg_Phase3">
                                    <param id="0" name="X">ViewportLeft(0) + (ViewportRight(0) - ViewportLeft(0)) / 2 - Bg_Phase3.Width / 2</param>
                                    <param id="1" name="Y">ViewportBottom(0) + (ViewportTop(0) - ViewportBottom(0)) / 2 - Bg_Phase3.Height / 2</param>
                                </action>
                                <action id="-3" name="Set position" sid="5370653259484316" type="UI_WoodFence">
                                    <param id="0" name="X">ViewportLeft(0) + (ViewportRight(0) - ViewportLeft(0)) / 2</param>
                                    <param id="1" name="Y">ViewportBottom(0) - UI_WoodFence.Height / 2</param>
                                </action>
                                <action id="-25" name="Move to bottom" sid="7927766903011257" type="UI_WoodFence" />
                                <action id="-3" name="Set position" sid="210243054585385" type="Character">
                                    <param id="0" name="X">ViewportLeft(0) + (ViewportRight(0) - ViewportLeft(0)) / 2</param>
                                    <param id="1" name="Y">ViewportBottom(0) - Character.Height / 2 - UI_WoodFence.Height + 20</param>
                                </action>
                                <action id="-25" name="Move to bottom" sid="134233793773651" type="Character" />
                                <action id="0" name="Call function" sid="8170140340169924" type="Function">
                                    <param id="0" name="Name">&quot;FadeIn&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="8385416434876928">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="4262395555220686" type="Button">
                                            <param id="0" name="Instance variable">action</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;pause&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Set position" sid="9548684514088731" type="Button">
                                            <param id="0" name="X">ViewportLeft(0) + 55</param>
                                            <param id="1" name="Y">ViewportTop(0) + 55</param>
                                        </action>
                                        <action id="-24" name="Move to top" sid="9457882631241481" type="Button" />
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="4400270356835207" title="arrange the flowers in the neckalce">
                    <sub-events>
                        <event-block sid="409180012291982">
                            <conditions>
                                <condition id="-2" name="On start of layout" sid="3618506777173733" type="System" />
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block collapsed="1" sid="7014517622640797">
                                    <conditions>
                                        <condition id="-10" name="For" sid="3082746535428171" type="System">
                                            <param id="0" name="Name">&quot;&quot;</param>
                                            <param id="1" name="Start index">1</param>
                                            <param id="2" name="End index">FlowersCount</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="834650229187708" type="System">
                                            <param id="0" name="Object to create">Flower</param>
                                            <param id="1" name="Layer">1</param>
                                            <param id="2" name="X">StartX</param>
                                            <param id="3" name="Y">StartY</param>
                                        </action>
                                        <action behavior="Bullet" id="5" name="Set enabled" sid="8340643653458692" type="Flower">
                                            <param id="0" name="State">0</param>
                                        </action>
                                        <action id="5" name="Set frame" sid="9436128099243996" type="Flower">
                                            <param id="0" name="Frame number">floor(random(Flower.AnimationFrameCount))</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="4920803967578114" type="Flower">
                                            <param id="0" name="Scale">MinScale + int(FlowersCount / 2 - abs(loopindex - (FlowersCount + 1) / 2)) / (int(FlowersCount / 2) / (MaxScale - MinScale))</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <comment>create the left handle</comment>
                                        <event-block sid="5521111084713958">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="6048616226536811" type="System">
                                                    <param id="0" name="First value">loopindex</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">1</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-3" name="Create object" sid="7385820670933109" type="System">
                                                    <param id="0" name="Object to create">Handle</param>
                                                    <param id="1" name="Layer">1</param>
                                                    <param id="2" name="X">StartX</param>
                                                    <param id="3" name="Y">StartY</param>
                                                </action>
                                                <action id="-1" name="Set X" sid="1028696709427027" type="Handle">
                                                    <param id="0" name="X">Flower.X - Flower.Width / 2 + Flower.Width * OverlapPercent - Handle.Width / 2 + Handle.Width * OverlapPercent</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="3324907066213274" type="System">
                                                    <param id="0" name="Variable">OffsetX</param>
                                                    <param id="1" name="Value">Handle.X</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>position the flowers</comment>
                                        <event-block sid="2080881523244351">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="7793842674130158" type="System">
                                                    <param id="0" name="First value">loopindex</param>
                                                    <param id="1" name="Comparison">4</param>
                                                    <param id="2" name="Second value">1</param>
                                                </condition>
                                                <condition id="-14" name="Pick by unique ID" sid="8476312808775534" type="Flowers">
                                                    <param id="0" name="Unique ID">PrevFlowerId</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-1" name="Set X" sid="1431566387625203" type="Flower">
                                                    <param id="0" name="X">Flowers.X + Flowers.Width / 2 - Flowers.Width * OverlapPercent + Flower.Width / 2 - Flower.Width * OverlapPercent</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="6433516641560013">
                                            <conditions />
                                            <actions>
                                                <action id="-9" name="Set value" sid="1285376557461711" type="System">
                                                    <param id="0" name="Variable">PrevFlowerId</param>
                                                    <param id="1" name="Value">Flower.UID</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>alternate flower z-index</comment>
                                        <event-block sid="5593692342965862">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="5868887008193373" type="System">
                                                    <param id="0" name="First value">loopindex % 2</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-24" name="Move to top" sid="3203867173999908" type="Flower" />
                                            </actions>
                                        </event-block>
                                        <event-block sid="5495084192163887">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="3494304268220528" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-25" name="Move to bottom" sid="6583249729721025" type="Flower" />
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <comment>create the right handle</comment>
                                <event-block sid="4687575304755778">
                                    <conditions>
                                        <condition id="-14" name="Pick by unique ID" sid="1911604165081956" type="Flowers">
                                            <param id="0" name="Unique ID">PrevFlowerId</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="2978320275460829" type="System">
                                            <param id="0" name="Object to create">Handle</param>
                                            <param id="1" name="Layer">1</param>
                                            <param id="2" name="X">StartX</param>
                                            <param id="3" name="Y">StartY</param>
                                        </action>
                                        <action id="-1" name="Set X" sid="2911675734485867" type="Handle">
                                            <param id="0" name="X">Flowers.X + Flowers.Width / 2 - Flowers.Width * OverlapPercent + Handle.Width / 2 - Handle.Width * OverlapPercent</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="1090972488579013" type="System">
                                            <param id="0" name="Variable">OffsetX</param>
                                            <param id="1" name="Value">(ViewportLeft(0) + (ViewportRight(0) - ViewportLeft(0)) / 2) - (OffsetX + (Handle.X - OffsetX) / 2)</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>center the necklace on the screen</comment>
                        <event-block sid="6784465003512577">
                            <conditions>
                                <condition id="-2" name="On start of layout" sid="6079895974385653" type="System" />
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="7386821725464899">
                                    <conditions>
                                        <condition id="-11" name="For Each" sid="3807265376951332" type="System">
                                            <param id="0" name="Object">Flower</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="8372932295548844" type="Flower">
                                            <param id="0" name="X">Flower.X + OffsetX</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="5916133201607468">
                                    <conditions>
                                        <condition id="-11" name="For Each" sid="1022727390224006" type="System">
                                            <param id="0" name="Object">Handle</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="9576492126463489" type="Handle">
                                            <param id="0" name="X">Handle.X + OffsetX</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group collapsed="1" description="" sid="3376336338478309" title="setup the physics joints">
                    <sub-events>
                        <comment>setup physics</comment>
                        <event-block sid="7232490483244657">
                            <conditions>
                                <condition id="-2" name="On start of layout" sid="1052132060643043" type="System" />
                            </conditions>
                            <actions>
                                <action behavior="Physics" id="12" name="Set world gravity" sid="1413495250168705" type="Handle">
                                    <param id="0" name="Gravity">0.1</param>
                                </action>
                                <action behavior="Physics" id="27" name="Set enabled" sid="4723768118030324" type="Flower">
                                    <param id="0" name="Mode">1</param>
                                </action>
                                <action behavior="Physics" id="23" name="Enable/disable collisions" sid="6527888485940189" type="Flower">
                                    <param id="0" name="Object">Flower</param>
                                    <param id="1" name="State">0</param>
                                </action>
                                <action behavior="Physics" id="23" name="Enable/disable collisions" sid="281679327512777" type="Flower">
                                    <param id="0" name="Object">Handle</param>
                                    <param id="1" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>connect the handles and flowers</comment>
                        <event-block collapsed="1" sid="9429585468775893">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="5663863042718579" type="System">
                                    <param id="0" name="First value">tickcount</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">TickCountAtStartOfLayout+2</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Physics" id="12" name="Set world gravity" sid="8674931364467533" type="Handle">
                                    <param id="0" name="Gravity">20</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="8622399581451">
                                    <conditions>
                                        <condition id="-11" name="For Each" sid="5852725855907303" type="System">
                                            <param id="0" name="Object">Flower</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="1385101807232099">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="8216741795881552" type="System">
                                                    <param id="0" name="First value">loopindex</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                                <condition id="-15" name="Pick nearest/furthest" sid="4709562870545281" type="Handle">
                                                    <param id="0" name="Which">0</param>
                                                    <param id="1" name="X">Flower.X</param>
                                                    <param id="2" name="Y">Flower.Y</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="Physics" id="11" name="Create revolute joint" sid="6349343316790178" type="Handle">
                                                    <param id="0" name="This image point">0</param>
                                                    <param id="1" name="Object">Flower</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="4950446967196114">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="2711927673509684" type="System">
                                                    <param id="0" name="First value">loopindex</param>
                                                    <param id="1" name="Comparison">4</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                                <condition id="-14" name="Pick by unique ID" sid="4556595268196246" type="Flowers">
                                                    <param id="0" name="Unique ID">PrevFlowerId</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="Physics" id="22" name="Create limited revolute joint" sid="3040171239691541" type="Flower">
                                                    <param id="0" name="This image point">&quot;left&quot;</param>
                                                    <param id="1" name="Object">Flowers</param>
                                                    <param id="2" name="Lower angle">-10</param>
                                                    <param id="3" name="Upper angle">25</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="9192473944810401">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="5595482088044314" type="System">
                                                    <param id="0" name="First value">loopindex</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">FlowersCount-1</param>
                                                </condition>
                                                <condition id="-15" name="Pick nearest/furthest" sid="4084691612697352" type="Handle">
                                                    <param id="0" name="Which">0</param>
                                                    <param id="1" name="X">Flower.X</param>
                                                    <param id="2" name="Y">Flower.Y</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="Physics" id="11" name="Create revolute joint" sid="2294649516096184" type="Handle">
                                                    <param id="0" name="This image point">0</param>
                                                    <param id="1" name="Object">Flower</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="9515931224848708">
                                            <conditions />
                                            <actions>
                                                <action id="-9" name="Set value" sid="7568188780362758" type="System">
                                                    <param id="0" name="Variable">PrevFlowerId</param>
                                                    <param id="1" name="Value">Flower.UID</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
