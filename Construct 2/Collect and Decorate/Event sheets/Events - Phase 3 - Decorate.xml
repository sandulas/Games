<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Events - Phase 3 - Decorate</name>
    <events>
        <variable constant="0" name="TickCountAtStartOfLayout" sid="6319678039979318" static="0" type="number">0</variable>
        <variable constant="0" name="StartX" sid="3880459603791739" static="0" type="number">280</variable>
        <variable constant="0" name="StartY" sid="9516740109418225" static="0" type="number">160</variable>
        <variable constant="0" name="FlowersCount" sid="7299355969258432" static="0" type="number">12</variable>
        <variable constant="0" name="OverlapPercent" sid="2236137402117079" static="0" type="number">0.15</variable>
        <variable constant="0" name="MinScale" sid="7179635873072381" static="0" type="number">0.5</variable>
        <variable constant="0" name="MaxScale" sid="9818304363819659" static="0" type="number">0.6</variable>
        <variable constant="0" name="PrevFlowerId" sid="9594445174543815" static="0" type="number">0</variable>
        <include>Events - Common</include>
        <event-block sid="9809400649618648">
            <conditions>
                <condition id="-2" name="On start of layout" sid="9736519629033493" type="System" />
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="86361725888015" type="System">
                    <param id="0" name="Variable">TickCountAtStartOfLayout</param>
                    <param id="1" name="Value">tickcount</param>
                </action>
            </actions>
        </event-block>
        <event-group description="" sid="4400270356835207" title="setup the necklace">
            <sub-events>
                <event-block sid="7014517622640797">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="7063747738115322" type="System" />
                        <condition id="-10" name="For" sid="3082746535428171" type="System">
                            <param id="0" name="Name">&quot;&quot;</param>
                            <param id="1" name="Start index">1</param>
                            <param id="2" name="End index">FlowersCount</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="834650229187708" type="System">
                            <param id="0" name="Object to create">Flower</param>
                            <param id="1" name="Layer">1</param>
                            <param id="2" name="X">StartX</param>
                            <param id="3" name="Y">StartY</param>
                        </action>
                        <action behavior="Bullet" id="5" name="Set enabled" sid="8340643653458692" type="Flower">
                            <param id="0" name="State">0</param>
                        </action>
                        <action id="5" name="Set frame" sid="9436128099243996" type="Flower">
                            <param id="0" name="Frame number">floor(random(Flower.AnimationFrameCount))</param>
                        </action>
                        <action disabled="1" id="9" name="Set scale" sid="5700140480365566" type="Flower">
                            <param id="0" name="Scale">0.5</param>
                        </action>
                        <action id="9" name="Set scale" sid="4920803967578114" type="Flower">
                            <param id="0" name="Scale">MinScale + int(FlowersCount / 2 - abs(loopindex - (FlowersCount + 1) / 2)) / (int(FlowersCount / 2) / (MaxScale - MinScale))</param>
                        </action>
                        <action disabled="1" id="-9" name="Set value" sid="7192696251241234" type="System">
                            <param id="0" name="Variable">debug_line2</param>
                            <param id="1" name="Value">debug_line2 &amp; &quot;, &quot; &amp; MinScale + int(FlowersCount / 2 - abs(loopindex - (FlowersCount + 1) / 2)) / (int(FlowersCount / 2) / (MaxScale - MinScale))</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>create the left handle</comment>
                        <event-block sid="5521111084713958">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="6048616226536811" type="System">
                                    <param id="0" name="First value">loopindex</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="7385820670933109" type="System">
                                    <param id="0" name="Object to create">Handle</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="X">StartX</param>
                                    <param id="3" name="Y">StartY</param>
                                </action>
                                <action id="-1" name="Set X" sid="1028696709427027" type="Handle">
                                    <param id="0" name="X">Flower.X - Flower.Width / 2 + Flower.Width * OverlapPercent - Handle.Width / 2 + Handle.Width * OverlapPercent</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>position the flowers</comment>
                        <event-block sid="2080881523244351">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="7793842674130158" type="System">
                                    <param id="0" name="First value">loopindex</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="8476312808775534" type="Flowers">
                                    <param id="0" name="Unique ID">PrevFlowerId</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-1" name="Set X" sid="1431566387625203" type="Flower">
                                    <param id="0" name="X">Flowers.X + Flowers.Width / 2 - Flowers.Width * OverlapPercent + Flower.Width / 2 - Flower.Width * OverlapPercent</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6433516641560013">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="1285376557461711" type="System">
                                    <param id="0" name="Variable">PrevFlowerId</param>
                                    <param id="1" name="Value">Flower.UID</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>alternate flower z-index</comment>
                        <event-block sid="5593692342965862">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="5868887008193373" type="System">
                                    <param id="0" name="First value">loopindex % 2</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-24" name="Move to top" sid="3203867173999908" type="Flower" />
                            </actions>
                        </event-block>
                        <event-block sid="5495084192163887">
                            <conditions>
                                <condition id="-22" name="Else" sid="3494304268220528" type="System" />
                            </conditions>
                            <actions>
                                <action id="-25" name="Move to bottom" sid="6583249729721025" type="Flower" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>create the right handle</comment>
                <event-block sid="4687575304755778">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="678367020166739" type="System" />
                        <condition id="-14" name="Pick by unique ID" sid="1911604165081956" type="Flowers">
                            <param id="0" name="Unique ID">PrevFlowerId</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="5236568714321276" type="System">
                            <param id="0" name="Object to create">Handle</param>
                            <param id="1" name="Layer">1</param>
                            <param id="2" name="X">Flowers.X + Flowers.Width / 2 - Flowers.Width * OverlapPercent + Handle.Width / 2 - Handle.Width * OverlapPercent</param>
                            <param id="3" name="Y">StartY</param>
                        </action>
                    </actions>
                </event-block>
                <comment>setup physics</comment>
                <event-block sid="7232490483244657">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="1052132060643043" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Physics" id="12" name="Set world gravity" sid="1413495250168705" type="Handle">
                            <param id="0" name="Gravity">0.1</param>
                        </action>
                        <action behavior="Physics" id="27" name="Set enabled" sid="4723768118030324" type="Flower">
                            <param id="0" name="Mode">1</param>
                        </action>
                        <action behavior="Physics" id="23" name="Enable/disable collisions" sid="6527888485940189" type="Flower">
                            <param id="0" name="Object">Flower</param>
                            <param id="1" name="State">0</param>
                        </action>
                        <action behavior="Physics" id="23" name="Enable/disable collisions" sid="281679327512777" type="Flower">
                            <param id="0" name="Object">Handle</param>
                            <param id="1" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>connect the handles and flowers</comment>
                <event-block sid="9429585468775893">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="5663863042718579" type="System">
                            <param id="0" name="First value">tickcount</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">TickCountAtStartOfLayout+2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Physics" id="12" name="Set world gravity" sid="8674931364467533" type="Handle">
                            <param id="0" name="Gravity">20</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8622399581451">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="3823353476787741" type="System">
                            <param id="0" name="First value">tickcount</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Second value">TickCountAtStartOfLayout+2</param>
                        </condition>
                        <condition id="-11" name="For Each" sid="5852725855907303" type="System">
                            <param id="0" name="Object">Flower</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="1385101807232099">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="8216741795881552" type="System">
                                    <param id="0" name="First value">loopindex</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">0</param>
                                </condition>
                                <condition id="-15" name="Pick nearest/furthest" sid="4709562870545281" type="Handle">
                                    <param id="0" name="Which">0</param>
                                    <param id="1" name="X">Flower.X</param>
                                    <param id="2" name="Y">Flower.Y</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Physics" id="11" name="Create revolute joint" sid="6349343316790178" type="Handle">
                                    <param id="0" name="This image point">0</param>
                                    <param id="1" name="Object">Flower</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="9192473944810401">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="5595482088044314" type="System">
                                    <param id="0" name="First value">loopindex</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">FlowersCount-1</param>
                                </condition>
                                <condition id="-15" name="Pick nearest/furthest" sid="4084691612697352" type="Handle">
                                    <param id="0" name="Which">0</param>
                                    <param id="1" name="X">Flower.X</param>
                                    <param id="2" name="Y">Flower.Y</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Physics" id="11" name="Create revolute joint" sid="2294649516096184" type="Handle">
                                    <param id="0" name="This image point">0</param>
                                    <param id="1" name="Object">Flower</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="4950446967196114">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="2711927673509684" type="System">
                                    <param id="0" name="First value">loopindex</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">0</param>
                                </condition>
                                <condition id="-14" name="Pick by unique ID" sid="4556595268196246" type="Flowers">
                                    <param id="0" name="Unique ID">PrevFlowerId</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Physics" id="22" name="Create limited revolute joint" sid="3040171239691541" type="Flower">
                                    <param id="0" name="This image point">&quot;left&quot;</param>
                                    <param id="1" name="Object">Flowers</param>
                                    <param id="2" name="Lower angle">-10</param>
                                    <param id="3" name="Upper angle">25</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="9515931224848708">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="7568188780362758" type="System">
                                    <param id="0" name="Variable">PrevFlowerId</param>
                                    <param id="1" name="Value">Flower.UID</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="4268447355844512">
                    <conditions>
                        <condition id="3" name="On touched object" sid="9032641195739861" type="Touch">
                            <param id="0" name="Object">UIButton</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="3537080032087292" type="System">
                            <param id="0" name="Variable">debug_line2</param>
                            <param id="1" name="Value">UIButton.title</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="2458004546395753" type="System">
                            <param id="0" name="Layout">Main</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
